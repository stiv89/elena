"use client";
import { useState, useRef, useEffect } from 'react';
import siteData from '../siteData.json';
import { BotIcon, SparklesIcon } from './ChatIcons';

interface Message {
  id: string;
  text: string;
  isBot: boolean;
  timestamp: Date;
  suggestions?: string[];
  context?: string;
}

interface ConversationContext {
  stage: 'greeting' | 'exploring' | 'interested' | 'booking' | 'pricing' | 'location' | 'scheduling';
  interests: string[];
  mentionedServices: string[];
  budget?: string;
  urgency?: 'low' | 'medium' | 'high';
  customerType?: 'new' | 'returning' | 'referred';
  previousTopic?: string;
}

interface IsaAssistantProps {
  enabled?: boolean;
}

export default function IsaAssistant({ enabled = true }: IsaAssistantProps) {
  const [isOpen, setIsOpen] = useState(false);
  const [messages, setMessages] = useState<Message[]>([]);
  const [inputText, setInputText] = useState('');
  const [isTyping, setIsTyping] = useState(false);
  const [conversationContext, setConversationContext] = useState<ConversationContext>({
    stage: 'greeting',
    interests: [],
    mentionedServices: [],
    customerType: 'new'
  });
  const messagesEndRef = useRef<HTMLDivElement>(null);

  // Analizador de intenci√≥n inteligente
  const analyzeIntent = (message: string) => {
    const msgLower = message.toLowerCase();
    const intent = {
      type: 'general',
      confidence: 0,
      entities: [] as string[],
      sentiment: 'neutral' as 'positive' | 'negative' | 'neutral',
      urgency: 'medium' as 'low' | 'medium' | 'high'
    };

    // Detecci√≥n de urgencia
    if (msgLower.includes('urgente') || msgLower.includes('hoy') || msgLower.includes('ahora')) {
      intent.urgency = 'high';
    } else if (msgLower.includes('cuando pueda') || msgLower.includes('no hay apuro')) {
      intent.urgency = 'low';
    }

    // Detecci√≥n de sentimiento
    const positiveWords = ['me gusta', 'excelente', 'perfecto', 'genial', 'maravilloso'];
    const negativeWords = ['no me gusta', 'malo', 'terrible', 'caro', 'no puedo'];
    
    if (positiveWords.some(word => msgLower.includes(word))) intent.sentiment = 'positive';
    if (negativeWords.some(word => msgLower.includes(word))) intent.sentiment = 'negative';

    // Clasificaci√≥n de intenciones
    if (msgLower.includes('precio') || msgLower.includes('costo') || msgLower.includes('cuanto')) {
      intent.type = 'pricing';
      intent.confidence = 0.9;
    } else if (msgLower.includes('reserva') || msgLower.includes('cita') || msgLower.includes('turno')) {
      intent.type = 'booking';
      intent.confidence = 0.95;
    } else if (msgLower.includes('donde') || msgLower.includes('ubicacion') || msgLower.includes('direccion')) {
      intent.type = 'location';
      intent.confidence = 0.9;
    } else if (msgLower.includes('horario') || msgLower.includes('cuando') || msgLower.includes('abierto')) {
      intent.type = 'scheduling';
      intent.confidence = 0.85;
    } else if (msgLower.includes('servicio') || msgLower.includes('que hacen') || msgLower.includes('maquillaje') || msgLower.includes('cabello')) {
      intent.type = 'services';
      intent.confidence = 0.8;
    }

    return intent;
  };

  // Generador de respuestas contextuales inteligentes
  const generateIntelligentResponse = (userMessage: string, context: ConversationContext): { response: string, newContext: ConversationContext, suggestions: string[] } => {
    const intent = analyzeIntent(userMessage);
    const msgLower = userMessage.toLowerCase();
    
    let response = '';
    let suggestions: string[] = [];
    // eslint-disable-next-line prefer-const
    let newContext = { ...context };

    // Actualizar contexto basado en el mensaje
    if (msgLower.includes('boda')) {
      newContext.interests.push('boda');
      newContext.stage = 'interested';
    } else if (msgLower.includes('trabajo')) {
      newContext.interests.push('trabajo');
      newContext.stage = 'exploring';
    }

    newContext.urgency = intent.urgency;
    newContext.previousTopic = intent.type;

    // L√≥gica de respuesta inteligente por intenci√≥n
    switch (intent.type) {
      case 'greeting':
        if (context.stage === 'greeting') {
          response = `¬°Hola! Soy Isa, tu consultora de belleza personal de Elena Ben√≠tez. 

Me especializo en encontrar exactamente lo que necesitas para verte y sentirte radiante. Con m√°s de 10 a√±os de experiencia, Elena ha transformado la belleza de miles de mujeres en Luque.

¬øPara qu√© ocasi√≥n especial te quieres ver perfecta? üíï`;

          suggestions = [
            "Una boda muy importante",
            "Reuni√≥n de trabajo",
            "Cita rom√°ntica",
            "Solo quiero consentirme",
            "Cambiar mi look completo"
          ];
          newContext.stage = 'exploring';
        }
        break;

      case 'pricing':
        if (msgLower.includes('boda')) {
          response = `Para bodas, Elena ofrece paquetes especiales completos:

üíÑ **Paquete Novia Cl√°sico**
‚Ä¢ Maquillaje social: ‚Ç≤110.000
‚Ä¢ Dise√±o de cejas + henna: ‚Ç≤50.000
‚Ä¢ **Total: ‚Ç≤160.000**

‚ú® **Paquete Novia Premium**
‚Ä¢ Maquillaje Glam: ‚Ç≤150.000
‚Ä¢ Lifting de pesta√±as: ‚Ç≤90.000
‚Ä¢ Tratamiento facial express: ‚Ç≤80.000
‚Ä¢ **Total: ‚Ç≤320.000** (Ahorro ‚Ç≤40.000)

¬øTe interesa alg√∫n paquete espec√≠fico? Puedo personalizar seg√∫n tu presupuesto üíé`;

          suggestions = [
            "Me interesa el paquete cl√°sico",
            "Quiero el premium completo",
            "¬øHay opciones m√°s econ√≥micas?",
            "¬øIncluye prueba previa?",
            "¬øHacen servicios a domicilio?"
          ];
        } else {
          response = generatePricingResponse();
          suggestions = [
            "¬øHay promociones disponibles?",
            "¬øAceptan tarjetas?",
            "¬øHay descuentos para varios servicios?",
            "Quiero agendar una cita",
            "¬øCu√°l es el m√°s popular?"
          ];
        }
        newContext.stage = 'pricing';
        break;

      case 'booking':
        if (intent.urgency === 'high') {
          response = `¬°Entiendo que es urgente! üö®

Elena tiene disponibilidad de emergencia para casos especiales:

üì± **Para hoy mismo**: Llama directo al ${siteData.contacto.telefono}
‚ö° **WhatsApp inmediato**: Te conecto ahora mismo
üè† **Servicio express a domicilio**: Disponible con recargo m√≠nimo

¬øEs para una ocasi√≥n muy especial que no puede esperar?`;

          suggestions = [
            "¬°S√≠, es una emergencia!",
            "Ll√°mame por favor",
            "¬øPueden venir a mi casa?",
            "¬øQu√© horarios tienen hoy?",
            "¬øCu√°l es el recargo por urgencia?"
          ];
        } else {
          response = `¬°Perfecto! Te ayudo a encontrar el mejor momento para tu cita üìÖ

**Disponibilidad esta semana:**
‚Ä¢ Lunes a Viernes: ${siteData.contacto.horarios}
‚Ä¢ S√°bados: Horarios especiales disponibles
‚Ä¢ Domingos: Solo servicios a domicilio

**Opciones de reserva:**
üè¢ En el sal√≥n (${siteData.contacto.direccion})
üè† A domicilio (+30% del valor del servicio)

¬øQu√© d√≠a y horario prefieres?`;

          suggestions = [
            "Prefiero en el sal√≥n",
            "Me conviene a domicilio",
            "¬øQu√© horarios tienen ma√±ana?",
            "Solo fines de semana",
            "¬øCu√°nto demora cada servicio?"
          ];
        }
        newContext.stage = 'booking';
        break;

      case 'services':
        if (msgLower.includes('maquillaje')) {
          response = generateMakeupResponse(context);
        } else if (msgLower.includes('cabello')) {
          response = generateHairResponse();
        } else {
          response = generateGeneralServicesResponse();
        }
        suggestions = getServiceSuggestions();
        newContext.stage = 'interested';
        break;

      case 'location':
        response = `üìç **Encontrarnos es s√∫per f√°cil:**

**Direcci√≥n:** ${siteData.contacto.direccion}
üó∫Ô∏è En el coraz√≥n de Luque, zona c√©ntrica
ÔøΩ Estacionamiento disponible
üöå Cerca de transporte p√∫blico

**Tambi√©n vamos a tu hogar:**
üè† Servicio a domicilio en Luque y zonas aleda√±as
‚è∞ Mismo d√≠a con reserva previa
üíº Llevamos todo el equipo profesional

¬øPrefieres venir al sal√≥n o que vayamos a tu casa?`;

        suggestions = [
          "Prefiero ir al sal√≥n",
          "Me conviene a domicilio",
          "¬øC√≥mo llego en colectivo?",
          "¬øHay estacionamiento?",
          "¬øA qu√© zonas van a domicilio?"
        ];
        break;

      default:
        response = generateContextualResponse(userMessage, context);
        suggestions = getContextualSuggestions(context);
    }

    return { response, newContext, suggestions };
  };

  // Funciones auxiliares para respuestas especializadas
  const generateMakeupResponse = (context: ConversationContext) => {
    if (context.interests.includes('boda')) {
      return `üíÑ **Maquillaje Nupcial - Especialidad de Elena:**

Elena es reconocida en Luque por sus maquillajes de novia impecables:

‚ú® **¬øPor qu√© las novias eligen a Elena?**
‚Ä¢ +200 novias han confiado en ella
‚Ä¢ T√©cnica que dura hasta 12 horas
‚Ä¢ Productos resistentes al agua y emociones
‚Ä¢ Incluye retoque gratuito el d√≠a de la boda

üé® **Opciones disponibles:**
‚Ä¢ **Maquillaje Natural**: ‚Ç≤110.000 (perfecto para ceremonias √≠ntimas)
‚Ä¢ **Maquillaje Glam**: ‚Ç≤150.000 (ideal para fiestas grandes)
‚Ä¢ **Paquete Completo**: Incluye prueba previa + d√≠a de la boda

¬øQu√© estilo de novia te imaginas siendo?`;
    }
    
    return `üíÑ **Elena es experta en maquillaje para cada ocasi√≥n:**

‚Ä¢ **Social**: ‚Ç≤110.000 - Elegante y duradero
‚Ä¢ **Glam**: ‚Ç≤150.000 - Impacto y sofisticaci√≥n  
‚Ä¢ **Medio**: ‚Ç≤75.000 - Natural pero impecable

Todos incluyen limpieza facial express. ¬øPara qu√© ocasi√≥n lo necesitas?`;
  };

  const generateHairResponse = () => {
    return `üíá‚Äç‚ôÄÔ∏è **Cuidado Capilar Profesional:**

Elena entiende que tu cabello es tu corona:

üåü **Tratamientos disponibles:**
‚Ä¢ **Lavado Cl√°sico**: ‚Ç≤60.000 - Limpieza profunda + peinado
‚Ä¢ **Tratamiento Hidratante**: ‚Ç≤85.000 - Nutrici√≥n intensa
‚Ä¢ **Lavado + Peinado Especial**: ‚Ç≤90.000 - Para eventos

üí° **¬øSab√≠as que Elena personaliza cada tratamiento seg√∫n tu tipo de cabello?**

¬øQu√© necesita tu cabello espec√≠ficamente?`;
  };

  const generateGeneralServicesResponse = () => {
    return `üåü **Elena ofrece servicios integrales de belleza:**

**Nuestras especialidades m√°s populares:**

üíÑ **Maquillaje** (desde ‚Ç≤75.000)
üëÅÔ∏è **Cejas y Pesta√±as** (desde ‚Ç≤25.000)
üíá‚Äç‚ôÄÔ∏è **Cuidado Capilar** (desde ‚Ç≤60.000)
‚ú® **Tratamientos Faciales** (desde ‚Ç≤80.000)
üíÖ **Manos y Pies** (desde ‚Ç≤30.000)

¬øHay alg√∫n √°rea espec√≠fica en la que quieres enfocarte?`;
  };

  const getServiceSuggestions = () => {
    return [
      "¬øCu√°l es el m√°s popular?",
      "¬øHacen paquetes combinados?",
      "¬øCu√°nto tiempo demora?",
      "¬øHay descuentos para varios servicios?",
      "Quiero ver ejemplos de trabajos"
    ];
  };

  const generatePricingResponse = () => {
    return `üí∞ **Precios transparentes y justos:**

Elena cree en la honestidad total con sus precios:

**Rangos de inversi√≥n:**
‚Ä¢ **B√°sico**: ‚Ç≤30.000 - ‚Ç≤70.000 (servicios esenciales)
‚Ä¢ **Intermedio**: ‚Ç≤80.000 - ‚Ç≤120.000 (tratamientos completos)
‚Ä¢ **Premium**: ‚Ç≤130.000+ (experiencias exclusivas)

**¬øPor qu√© invertir en Elena?**
‚úÖ 10+ a√±os de experiencia comprobada
‚úÖ Productos profesionales de primera calidad
‚úÖ Garant√≠a de satisfacci√≥n total
‚úÖ Atenci√≥n personalizada y dedicada

¬øQu√© presupuesto ten√≠as en mente?`;
  };

  const generateContextualResponse = (message: string, context: ConversationContext) => {
    // Respuestas inteligentes basadas en el contexto de la conversaci√≥n
    if (context.stage === 'booking' && message.toLowerCase().includes('cuando')) {
      return `Bas√°ndome en lo que hemos conversado, te recomiendo:

üìÖ **Para tu ocasi√≥n especial:**
‚Ä¢ Reserva con 3-5 d√≠as de anticipaci√≥n
‚Ä¢ Los viernes y s√°bados se llenan r√°pido
‚Ä¢ Elena prefiere dedicar tiempo completo a cada cliente

¬øTe conviene entre semana o necesariamente fin de semana?`;
    }

    return `Entiendo perfectamente lo que necesitas. D√©jame conectarte con Elena directamente para que recibas la atenci√≥n personalizada que mereces.

En estos 10 a√±os, Elena ha aprendido que cada mujer es √∫nica y merece una experiencia de belleza completamente personalizada.

¬øTe parece si coordinamos una breve llamada para conocerte mejor?`;
  };

  const getContextualSuggestions = (context: ConversationContext) => {
    switch (context.stage) {
      case 'exploring':
        return [
          "¬øCu√°les son sus especialidades?",
          "Quiero ver fotos de trabajos",
          "¬øQu√© hace √∫nicos sus servicios?",
          "¬øC√≥mo puedo reservar?",
          "¬øTienen promociones?"
        ];
      case 'interested':
        return [
          "¬øCu√°nto cuesta este servicio?",
          "¬øCu√°nto tiempo demora?",
          "¬øQu√© incluye exactamente?",
          "Quiero agendar una cita",
          "¬øHay paquetes disponibles?"
        ];
      case 'pricing':
        return [
          "¬øHay formas de pago?",
          "¬øOfrecen descuentos?",
          "¬øVale la pena el precio?",
          "Quiero reservar ahora",
          "¬øHay garant√≠a?"
        ];
      case 'booking':
        return [
          "¬øQu√© necesito llevar?",
          "¬øCu√°nto tiempo antes llego?",
          "¬øPuedo reagendar si es necesario?",
          "¬øConfirman la cita por WhatsApp?",
          "¬øHay alguna preparaci√≥n previa?"
        ];
      default:
        return [
          "Cu√©ntame m√°s sobre Elena",
          "¬øQu√© servicios ofrecen?",
          "¬øD√≥nde est√°n ubicados?",
          "¬øC√≥mo puedo contactarlos?",
          "¬øTienen redes sociales?"
        ];
    }
  };

  useEffect(() => {
    if (messages.length === 0) {
      // Mensaje de bienvenida inicial inteligente
      const welcomeMessage: Message = {
        id: '1',
        text: `¬°Hola! Soy Isa, tu consultora personal de belleza de Elena Ben√≠tez. 

Me especializo en encontrar exactamente lo que necesitas para verte y sentirte radiante. Con m√°s de 10 a√±os de experiencia, Elena ha transformado la belleza de miles de mujeres en Luque.

¬øPara qu√© ocasi√≥n especial te quieres ver perfecta? üíï`,
        isBot: true,
        timestamp: new Date(),
        suggestions: [
          "Una boda muy importante",
          "Reuni√≥n de trabajo", 
          "Cita rom√°ntica",
          "Solo quiero consentirme",
          "Cambiar mi look completo"
        ],
        context: 'greeting'
      };
      setMessages([welcomeMessage]);
    }
  }, [messages.length]);

  useEffect(() => {
    scrollToBottom();
  }, [messages]);

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });
  };

  const handleSendMessage = async (messageText?: string) => {
    const textToSend = messageText || inputText;
    if (!textToSend.trim()) return;

    // Agregar mensaje del usuario
    const userMessage: Message = {
      id: Date.now().toString(),
      text: textToSend,
      isBot: false,
      timestamp: new Date()
    };

    setMessages(prev => [...prev, userMessage]);
    setInputText('');
    setIsTyping(true);

    // Simular delay de respuesta m√°s realista
    setTimeout(() => {
      const { response, newContext, suggestions } = generateIntelligentResponse(textToSend, conversationContext);
      
      const botResponse: Message = {
        id: (Date.now() + 1).toString(),
        text: response,
        isBot: true,
        timestamp: new Date(),
        suggestions,
        context: newContext.stage
      };
      
      setMessages(prev => [...prev, botResponse]);
      setConversationContext(newContext);
      setIsTyping(false);

      // Si la respuesta incluye WhatsApp, abrir enlace despu√©s de un momento
      if (response.includes('WhatsApp') && response.includes('redirigir')) {
        setTimeout(() => {
          window.open(`https://wa.me/${siteData.whatsapp.number}?text=Hola Elena, vengo desde la web y me gustar√≠a reservar una cita`, '_blank');
        }, 2000);
      }
    }, 1500 + Math.random() * 2000); // Delay m√°s realista
  };

  const handleKeyPress = (e: React.KeyboardEvent) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      handleSendMessage();
    }
  };

  const quickQuestions = [
    "¬øCu√°les son sus servicios?",
    "¬øCu√°nto cuesta un maquillaje?",
    "¬øCu√°les son los horarios?",
    "¬øD√≥nde est√°n ubicados?",
    "Quiero reservar una cita"
  ];

  if (!enabled) return null;

  return (
    <>
      {/* Bot√≥n flotante */}
      <div className="fixed bottom-4 sm:bottom-6 left-4 sm:left-6 z-50">
        <div className={`transition-all duration-300 ${isOpen ? 'scale-0 opacity-0' : 'scale-100 opacity-100'}`}>
          <button
            onClick={() => setIsOpen(true)}
            className="group bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white w-12 sm:w-14 h-12 sm:h-14 rounded-full shadow-2xl flex items-center justify-center transition-all duration-300 hover:scale-110 animate-pulse"
            title="Chat con Isa - Asistente Virtual"
          >
            <SparklesIcon className="w-5 sm:w-6 h-5 sm:h-6" />
          </button>
        </div>

        {/* Tooltip */}
        <div className={`absolute bottom-14 sm:bottom-16 left-0 bg-black text-white text-xs sm:text-sm px-2 sm:px-3 py-1 sm:py-2 rounded-lg shadow-lg whitespace-nowrap transition-all duration-300 ${isOpen ? 'opacity-0 pointer-events-none' : 'opacity-100'}`}>
          ¬°Hola! Soy Isa üëã
          <div className="absolute top-full left-3 sm:left-4 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-black"></div>
        </div>
      </div>

      {/* Chat Window */}
      <div className={`fixed bottom-20 sm:bottom-24 left-4 sm:left-6 right-4 sm:right-auto sm:w-96 h-[450px] sm:h-[500px] z-40 transition-all duration-300 ${isOpen ? 'opacity-100 pointer-events-auto scale-100' : 'opacity-0 pointer-events-none scale-95'}`}>
        {/* Chat Container */}
        <div className="bg-white rounded-2xl shadow-2xl flex flex-col overflow-hidden h-full backdrop-blur-sm border border-gray-200">
          {/* Header */}
          <div className="bg-gradient-to-r from-purple-600 to-pink-600 text-white p-3 sm:p-4 flex items-center justify-between">
            <div className="flex items-center gap-3">
              <div className="w-8 sm:w-10 h-8 sm:h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                <BotIcon className="w-4 sm:w-5 h-4 sm:h-5" />
              </div>
              <div>
                <h3 className="font-semibold text-sm sm:text-base">Isa</h3>
                <p className="text-xs opacity-90">Asistente Virtual</p>
              </div>
            </div>
            <button
              onClick={() => setIsOpen(false)}
              className="w-7 sm:w-8 h-7 sm:h-8 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 flex items-center justify-center transition-colors"
            >
              <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>

          {/* Messages */}
          <div className="flex-1 overflow-y-auto p-3 sm:p-4 space-y-3 sm:space-y-4">
            {messages.map((message) => (
              <div key={message.id} className={`flex ${message.isBot ? 'justify-start' : 'justify-end'}`}>
                <div className={`max-w-[85%] sm:max-w-[80%] p-2 sm:p-3 rounded-lg whitespace-pre-line ${
                  message.isBot 
                    ? 'bg-gray-100 text-gray-800 rounded-tl-sm' 
                    : 'bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-tr-sm'
                }`}>
                  <p className="text-xs sm:text-sm leading-relaxed">{message.text}</p>
                  <p className={`text-xs mt-1 ${message.isBot ? 'text-gray-500' : 'text-white text-opacity-70'}`}>
                    {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                  </p>
                </div>
              </div>
            ))}
            
            {/* Typing indicator */}
            {isTyping && (
              <div className="flex justify-start">
                <div className="bg-gray-100 p-2 sm:p-3 rounded-lg rounded-tl-sm">
                  <div className="flex space-x-1">
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                    <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                  </div>
                </div>
              </div>
            )}
            <div ref={messagesEndRef} />
          </div>

          {/* Quick Questions */}
          {messages.length === 1 && (
            <div className="p-3 sm:p-4 border-t border-gray-200">
              <p className="text-xs text-gray-500 mb-2">Preguntas frecuentes:</p>
              <div className="space-y-1">
                {quickQuestions.map((question, index) => (
                  <button
                    key={index}
                    onClick={() => setInputText(question)}
                    className="block w-full text-left text-xs bg-gray-50 hover:bg-gray-100 p-2 rounded transition-colors"
                  >
                    {question}
                  </button>
                ))}
              </div>
            </div>
          )}

          {/* Input */}
          <div className="p-3 sm:p-4 border-t border-gray-200">
            <div className="flex gap-2">
              <input
                type="text"
                value={inputText}
                onChange={(e) => setInputText(e.target.value)}
                onKeyPress={handleKeyPress}
                placeholder="Escribe tu consulta..."
                className="flex-1 px-3 py-2 border border-gray-300 rounded-full text-xs sm:text-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                disabled={isTyping}
              />
              <button
                onClick={() => handleSendMessage()}
                disabled={!inputText.trim() || isTyping}
                className="w-8 sm:w-10 h-8 sm:h-10 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-full flex items-center justify-center transition-colors"
              >
                <svg className="w-3 sm:w-4 h-3 sm:h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </>
  );
}
